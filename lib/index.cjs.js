"use strict";class AsyncLocalStorage{async setItem(e,o){return new Promise(t=>{window.localStorage.setItem(e,o),t(!0)})}getItem(e){return window.localStorage.getItem(e)}async removeItem(e){return new Promise(o=>{window.localStorage.removeItem(e),o(!0)})}async clear(){return new Promise(e=>{window.localStorage.clear(),e(!0)})}}function getLSCookie(){const e=document.cookie.match(/__ls-db=(.*)LS_END/);return e&&e[1]?JSON.parse(decodeURIComponent(e[1])):{}}function setLSCookie(e,o=7){const t=new Date;t.setTime(t.getTime()+864e5*o),document.cookie=`__ls-db=${encodeURIComponent(JSON.stringify(e))}LS_END; expires=${t.toUTCString()}; path=/`}class CookieFallback{constructor({cookieExpirationDays:e=7}){this.exdays=e}async setItem(e,o){return new Promise(t=>{const r=getLSCookie();r[e]=o,setLSCookie(r,this.exdays),t(!0)})}getItem(e){return getLSCookie()[e]}async removeItem(e){return new Promise(o=>{const t=getLSCookie();delete t[e],setLSCookie(t,this.exdays),o(!0)})}async clear(){return new Promise(e=>{const o=new Date(0);document.cookie=`__ls-db=; expires=${o.toUTCString()}; path=/`})}}let internalLocalStorage={};class PrivateMemoryFallback{async setItem(e,o){return new Promise(t=>{internalLocalStorage[e]=o,t(!0)})}getItem(e){return internalLocalStorage[e]}async removeItem(e){return new Promise(o=>{delete internalLocalStorage[e],o(!0)})}async clear(){return new Promise(e=>{internalLocalStorage={},e(!0)})}}let StorageConstructor,isBrowser=!1,isLocalStorageAvailable=!1;if("undefined"!=typeof window){isBrowser=!0;try{window.localStorage&&(window.localStorage.setItem("compatibility-test","works"),window.localStorage.removeItem("compatibility-test"),isLocalStorageAvailable=!0)}catch(e){isLocalStorageAvailable=!1,void 0===window.document&&(isBrowser=!1)}}var index=new(StorageConstructor=isBrowser&&isLocalStorageAvailable?AsyncLocalStorage:isBrowser?CookieFallback:PrivateMemoryFallback);module.exports=index;
